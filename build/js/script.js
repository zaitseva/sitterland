function testDevice(){var a,b,c;window.device={},a=window.document.documentElement,c=window.navigator.userAgent.toLowerCase(),device.ios=function(){return device.iphone()||device.ipod()||device.ipad()},device.iphone=function(){return b("iphone")},device.ipod=function(){return b("ipod")},device.ipad=function(){return b("ipad")},device.android=function(){return b("android")},device.androidPhone=function(){return device.android()&&b("mobile")},device.androidTablet=function(){return device.android()&&!b("mobile")},device.blackberry=function(){return b("blackberry")||b("bb10")||b("rim")},device.blackberryPhone=function(){return device.blackberry()&&!b("tablet")},device.blackberryTablet=function(){return device.blackberry()&&b("tablet")},device.windows=function(){return b("windows")},device.windowsPhone=function(){return device.windows()&&b("phone")},device.windowsTablet=function(){return device.windows()&&b("touch")},device.fxos=function(){return(b("(mobile;")||b("(tablet;"))&&b("; rv:")},device.fxosPhone=function(){return device.fxos()&&b("mobile")},device.fxosTablet=function(){return device.fxos()&&b("tablet")},device.meego=function(){return b("meego")},device.mobile=function(){return device.androidPhone()||device.iphone()||device.ipod()||device.windowsPhone()||device.blackberryPhone()||device.fxosPhone()||device.meego()},device.tablet=function(){return device.ipad()||device.androidTablet()||device.blackberryTablet()||device.windowsTablet()||device.fxosTablet()},device.portrait=function(){return 90!==Math.abs(window.orientation)},device.landscape=function(){return 90===Math.abs(window.orientation)},b=function(a){return-1!==c.indexOf(a)};document.getElementsByTagName("html")[0]}function getVideo(){var a=null,b=document.getElementById("video");if(window.navigator=window.navigator||{},navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||null,null===navigator.getUserMedia)document.getElementById("gum-unsupported").classList.remove("hidden"),document.getElementById("button-play-gum").setAttribute("disabled","disabled"),document.getElementById("button-stop-gum").setAttribute("disabled","disabled");else{var c=window.URL?window.URL.createObjectURL:function(a){return a},d=window.AudioContext||window.webkitAudioContext||null;null===d&&document.getElementById("gum-partially-supported").classList.remove("hidden"),document.getElementById("button-play-gum").addEventListener("click",function(){document.getElementById("button-stop-gum").classList.remove("hidden"),navigator.getUserMedia({video:!0,audio:!0},function(d){a=d,b.src=c(d),b.play()},function(a){alert("Ошибка захвата видео: ",a.code)})}),document.getElementById("button-stop-gum").addEventListener("click",function(){return document.getElementById("video").controls=!0,b.pause(),a.stop(),!1})}}function setCityAndReload(a){var b=new Date((new Date).getTime()+31536e6);document.cookie="city="+a+"; path=/; expires="+b.toUTCString()}function getFormMethod(a){var b;return b=a.find('input[name="_method"]').length>0?a.find('input[name="_method"]').val():a.attr("method")}function sendValidatedForm(a,b){var c=$(a);return"undefined"!=typeof c.data("ajax")&&c.data("ajax")===!1?a.submit():($.ajax({type:getFormMethod(c),url:c.attr("action"),data:c.serialize(),dataType:"json",success:function(a){a.redirect&&window.location.replace(a.redirect),console.log(a)},error:function(a){switch(a.status){case 422:var c=$.parseJSON(a.responseText);console.log(c),b.showErrors(c);break;case 400:case 401:case 403:break;default:console.log(a.status+":"+a.responseText);var d='<div class="alert fade in alert-warning"><div class="wrapper"><button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button><p class="b_warn">'+a.responseText+"</p></div></div>";$("#header").after(d)}}}),!1)}var oldIE=!1;testDevice();var doc,scrollPos=0,scrollDelay=0,wnd;$(document).ready(function(){wnd=$(window),oldIE=$("html").hasClass("lt-ie10"),doc=$(document),$(".seldate").seldate(),$("input.custom, select.custom").styler(),$(".b-form").formFunc(),$(".js-scroll").mCustomScrollbar({live:!0,axis:"y",advanced:{updateOnContentResize:!0}}),$("input.phone_mask").mask("Телефон +7 (999) 999-99-99",{placeholder:"Телефон +7 (ХХХ) ХХХ-ХХ-ХХ"}),$("input.maskfrom4").mask("От 9999 руб.",{placeholder:"От 50 руб."}),$("input.maskbefore4").mask("До 9999 руб.",{placeholder:"До 300 руб."}),$("input.mask4").mask("9999 руб.",{placeholder:"200 руб."}),$("input.maskfrom5").mask("От 99 999 руб.",{placeholder:"От 500 руб."}),$("input.maskbefore5").mask("До 99 999 руб.",{placeholder:"До 1 000 руб."}),$("input.mask5").mask("99 999 руб.",{placeholder:"700 руб."}),$("input.maskfrom6").mask("От 999 999 руб.",{placeholder:"От 25 000 руб."}),$("input.maskbefore6").mask("До 999 999 руб.",{placeholder:"До 50 000 руб."}),$("input.mask6").mask("999 999 руб.",{placeholder:"25 000 руб."}),$("input.maskdate").each(function(){$(this).mask("99/99/9999")}),$(".datepicker").datepicker({format:"dd/mm/yyyy",language:"ru",autoclose:!0}),$(".hint").tooltip(),$("#video").length>0&&getVideo(),$(".b-slider").slideCarousel(),$(".b-partners img").length>5&&$(".b-partners").each(function(){var a=$(this).find(".d_table");a.on("init",function(b,c){var d=$('<a href="#" class="slick-arrow-prev s-prev"></a>').appendTo(a),e=$('<a href="#" class="slick-arrow-next s-next"></a>').appendTo(a);d.on("click",function(a){a.preventDefault(),c.slickPrev()}),e.on("click",function(a){a.preventDefault(),c.slickNext()})}).slick({accessibility:!1,arrows:!1,draggable:!1,infinite:!0,swipe:!1,touchMove:!0,speed:1e3,slidesToShow:5,slidesToScroll:1})}),$("#change-city").cityChoose(),$('input[autocomplete="on"]').autocomleteFunc(),$(document).on("click",".show-alert",function(){$($(this).data("target")).addClass("in")}),$(document).on("click",".hide-alert",function(){$(this).closest(".alert").removeClass("in")}),$(".map-popup").on("show.bs.modal",function(a){$(".map-popup").mapInit()}),$(".all_reviews").moreReviews(),$(".js-schedule").schedule()}),function(a){a.fn.heightAdjustment=function(b){this.each(function(){var b=0,c=a(this).children();c.height("").removeClass("evenlyready"),c.each(function(){b=Math.max(b,a(this).height())}),c.height(b).addClass("evenlyready")})}}(jQuery),function(a){a.fn.formFunc=function(b){this.each(function(){var b=a(this),c=b.find("button"),d=b.find(".langsblock"),e=a(".agreebox",b),f=a(".lngbox",b),g=a(".inpprice .exec a",b),h=a(".valtextarea",b),j=a(".agreed",b),k=a(".checkweek",b);e.on("change",function(){e.is(":checked")?(c.prop("disabled",!1),c.removeClass("btdisable")):(c.prop("disabled",!0),c.addClass("btdisable"))}),k.on("change",function(){if(k.is(":checked"))for(i=0;i<5;i++)k.closest(".field").find(".chkwrap:eq("+i+") input").attr("checked","checked"),k.closest(".field").find(".chkwrap:eq("+i+") .jq-checkbox").addClass("checked");else for(i=0;i<5;i++)k.closest(".field").find(".chkwrap:eq("+i+") input").removeAttr("checked"),k.closest(".field").find(".chkwrap:eq("+i+") .jq-checkbox").removeClass("checked")}),f.on("change bind",function(){f.is(":checked")?d.show():d.hide()}),h.on("keyup",function(){var b=a(this).val();a(this).closest(".fieldrow").find(".num").text(b.length)}),g.on("click",function(){return a(this).closest(".field").hasClass("disabled")?!1:(a(this).parent().hasClass("range")?(a(this).closest(".fieldrow").find(".exectly").removeClass("hidden"),a(this).closest(".fieldrow").find(".range").addClass("hidden")):(a(this).closest(".fieldrow").find(".range").removeClass("hidden"),a(this).closest(".fieldrow").find(".exectly").addClass("hidden")),!1)}),j.on("change",function(){j.is(":checked")?(j.closest(".field").find('input[type="text"], select').prop("disabled",!0),j.closest(".field").addClass("disabled")):(j.closest(".field").find('input[type="text"], select').prop("disabled",!1),j.closest(".field").removeClass("disabled"))}),b.find(".seldate").each(function(){var b=a(this);b.find("select").on("change",function(){testSelDate(b)})}),d.each(function(){var b=a(this);b.delegate(".onelang a","click",function(){var b=a(this).parent(),c=b.children("input");return c.val(""),b.remove(),!1}),b.find(".addlang").click(function(){var a=b.find(".onelang:first()"),c=a.clone();a.before(c),c.show(),a.find(".hidden").removeClass("hidden");var d=c.find("input"),e=c.find("a");a.find("input").addClass("hidden"),a.find(".text").text(d.val());var f=/^([a-z_]*?)\[([0-9]*?)\]$/i,g=f.exec(d.attr("name")),h=g[1],i=1*g[2]+1;return d.attr("name",h+"["+i+"]").attr("id",h+"["+i+"]").val(""),e.attr("href","#"+h+"["+i+"]"),!1})})})}}(jQuery),function(a){a.fn.seldate=function(){var b=a(this),c=b.find(".realseldate"),d=c.val();if(d&&""!==d){d=d.split(".");var e=b.find(".sel_day"),f=b.find(".sel_month"),g=b.find(".sel_year");e.val(d[0]),f.val(d[1]),g.val(d[2])}}}(jQuery),function(a){a.fn.slideCarousel=function(b){this.each(function(){var b=a(this);b.on("init",function(c,d){b.find(".b-image").each(function(){var b=a(this);bgimg=b.find("img"),bgimg.css("display","none"),b.css({"background-image":'url("'+bgimg.attr("src")+'")',"background-position":"50% 50%","background-size":"cover"})}),a(".b-sub_menu a:first-child").addClass("active")}).on("afterChange",function(b,c){a(".b-sub_menu a").removeClass("active"),a(".b-sub_menu a:eq("+c.currentSlide+")").addClass("active")}).slick({infinite:!0,dots:!1,cssEase:"ease-in-out",easing:"easeInOutCubic",speed:600,autoplay:!0,fade:!0,accessibility:!1,arrows:!1,draggable:!1,swipe:!1,touchMove:!0,autoplaySpeed:b.data("speed")}),a(".b-sub_menu a").off("mouseover").on("mouseover",function(){var c=a(this).index();b.slick("slickGoTo",c)})})}}(jQuery),function(){$.fn.cityChoose=function(){this.each(function(){var a=$(this),b=$(".b-form",a),c=$(".input",b);$(".city_change a",b).click(function(a){a.preventDefault(),c.val($(this).text())});var d=c.data("path"),e=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:d});c.typeahead({hint:!0,highlight:!0,minLength:1},{name:"city",display:"value",source:e}),b.find("input.tt-input").each(function(){var a=$(this);a.on("keypress",function(a){return 13===a.which?(b.get(0).submit(),!0):void 0}),a.on("click",function(a){$(this).select()})}),b.on("submit",function(a){a.preventDefault();var c=$(b).find(".inp").val();""!==c&&setCityAndReload(c)})})}}(jQuery),function(){$.fn.autocomleteFunc=function(){this.each(function(){var a=$(this),b=a.closest("form"),c=a.data("path"),d=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:c});a.typeahead({hint:!0,highlight:!0,minLength:1},{name:"city",display:"value",source:d}),b.find("input.tt-input").each(function(){var a=$(this);a.on("keypress",function(a){return 13===a.which?(b.get(0).submit(),!0):void 0}),a.on("click",function(a){$(this).select()})})})}}(jQuery),function(a){a.fn.mapInit=function(b){this.each(function(){function c(){function b(a){for(var b=0;b<a.length;b++){for(var c=(a[b].id,0);c<a[b].regions.length;c++)for(var d=(a[b].regions[c].city,a[b].regions[c].coordinates,a[b].regions[c].metro),h=0;h<d.length;h++)for(var i=d[h].station,j=0;j<d[h].points.length;j++){var k=d[h].points[j],l=new ymaps.GeoObject({geometry:{type:"Point",coordinates:[k.coordinates[0],k.coordinates[1]]},properties:{balloonContentBody:'<span class="marker">'+(k.img?'<img src="'+k.img+'" alt="">':"")+(k.link?'<a href="'+k.link+'">'+k.name+"</a><br />":"")+(k.age?'<b class="b-marker_age">'+k.age+"</b>":"")+(k.date?'<b class="b-marker_date ic_date">'+k.date+"</b>":"")+(k.exp?'&nbsp;<span class="b-color_grey">|</span>&nbsp;опыт: <b class="b-marker_exp">'+k.exp+"</b><br />":"")+(k.fio?'&nbsp;<span class="b-color_grey">|</span>&nbsp;<b class="b-marker_name">'+k.fio+"</b><br />":"")+(k.remot?'Менее <b class="b-marker_remot">'+k.remot+'</b> (<span class="ic_metro">'+i+"</span>)<br />":"")+(k.pay?'<span class="b-color_grey">Оплата:</span> <b class="b-marker_pay">'+k.pay+'</b> <span class="b-rub">Р</span>/час</span>':"</span>")}},{balloonCloseButton:!1,balloonOffset:[0,177],balloonMaxWidth:225,balloonMinWidth:225,balloonAutoPan:!0,hideIconOnBalloonOpen:!1,iconLayout:"default#image",iconImageHref:g.data("icon"),iconImageSize:[34,48],iconImageOffset:[-17,-21]});e.add(l),f.push(l)}map.geoObjects.add(e)}}map=new ymaps.Map("map2",{center:[g.data("lat"),g.data("lng")],zoom:g.data("zoom")?g.data("zoom"):9,type:"yandex#map",controls:[]}),map.events.add("click",function(a){map.balloon.isOpen()&&map.balloon.close()});var c=[{href:"./icons/clustericon.png",size:[55,55],offset:[-20,-20]}],d=[10,40],e=new ymaps.Clusterer({clusterIcons:c,clusterNumbers:d});if(e.options.set({gridSize:g.data("gridsize")}),map.behaviors.enable(["scrollZoom"]),!g.data("path"))return alert("Не указан путь к файлу с точками"),!1;var f=[];g.on("nanyloaded",function(a,c){b(c)}),a.getJSON(g.data("path"),function(b){a.each(b,function(a,b){g.trigger("nanyloaded",[b])})})}var d,e={};d="string"!=typeof b?a.extend(e,b):e;var f=a(this);ymaps.ready(c);var g=f.find("#map2")})}}(jQuery),function(a){a.fn.schedule=function(b){this.each(function(){function b(){c(),d()}function c(){j.on("change.scheduleRadioChange",function(b){var c=a(this),d=c.attr("id");l[d]&&c.is(":checked")&&e(l[d])})}function d(){k.on("change.scheduleCheckboxChange",f)}function e(b){k.off("change.scheduleCheckboxChange"),k.prop("checked",!1).trigger("change"),a.each(b,function(c){var d=b[c];a("#"+d,h).prop("checked",!0).trigger("change")}),d()}function f(){for(radio in l){var b=l[radio];g(b)?a("#"+radio,h).trigger("click"):m.trigger("click")}}function g(b){for(i in b){var c=a("#"+b[i],h).prop("checked");if(!c)return!1}return!0}var h=a(this),j=a('input[type="radio"]',h),k=a('input[type="checkbox"]',h),l={radio_2:["checkbox_14","checkbox_15","checkbox_16","checkbox_17","checkbox_18","checkbox_19","checkbox_20","checkbox_21","checkbox_22","checkbox_23","checkbox_24","checkbox_25","checkbox_26","checkbox_27","checkbox_28","checkbox_29","checkbox_30","checkbox_31","checkbox_32","checkbox_33","checkbox_34","checkbox_35","checkbox_36","checkbox_37","checkbox_38","checkbox_39","checkbox_40","checkbox_41","checkbox_42","checkbox_43","checkbox_44","checkbox_45","checkbox_46","checkbox_47","checkbox_48","checkbox_49","checkbox_50","checkbox_51","checkbox_52","checkbox_53","checkbox_54","checkbox_55","checkbox_56","checkbox_57","checkbox_58","checkbox_59","checkbox_60","checkbox_61","checkbox_62"],radio_3:["checkbox_14","checkbox_15","checkbox_16","checkbox_17","checkbox_18","checkbox_21","checkbox_22","checkbox_23","checkbox_24","checkbox_25","checkbox_28","checkbox_29","checkbox_30","checkbox_31","checkbox_32","checkbox_35","checkbox_36","checkbox_37","checkbox_38","checkbox_39"],radio_5:["checkbox_35","checkbox_36","checkbox_37","checkbox_38","checkbox_39","checkbox_40","checkbox_41"],radio_6:["checkbox_42","checkbox_43","checkbox_44","checkbox_45","checkbox_46","checkbox_47","checkbox_48"],radio_7:["checkbox_49","checkbox_50","checkbox_51","checkbox_52","checkbox_53","checkbox_54","checkbox_55"],radio_8:["checkbox_56","checkbox_57","checkbox_58","checkbox_59","checkbox_60","checkbox_61","checkbox_62"],radio_23:["checkbox_14","checkbox_15","checkbox_16","checkbox_17","checkbox_18","checkbox_19","checkbox_20","checkbox_21","checkbox_22","checkbox_23","checkbox_24","checkbox_25","checkbox_26","checkbox_27","checkbox_28","checkbox_29","checkbox_30","checkbox_31","checkbox_32","checkbox_33","checkbox_34","checkbox_35","checkbox_36","checkbox_37","checkbox_38","checkbox_39","checkbox_40","checkbox_41","checkbox_42","checkbox_43","checkbox_44","checkbox_45","checkbox_46","checkbox_47","checkbox_48","checkbox_49","checkbox_50","checkbox_51","checkbox_52","checkbox_53","checkbox_54","checkbox_55","checkbox_56","checkbox_57","checkbox_58","checkbox_59","checkbox_60","checkbox_61","checkbox_62"],radio_24:["checkbox_14","checkbox_15","checkbox_16","checkbox_17","checkbox_18","checkbox_21","checkbox_22","checkbox_23","checkbox_24","checkbox_25","checkbox_28","checkbox_29","checkbox_30","checkbox_31","checkbox_32","checkbox_35","checkbox_36","checkbox_37","checkbox_38","checkbox_39"],radio_26:["checkbox_35","checkbox_36","checkbox_37","checkbox_38","checkbox_39","checkbox_40","checkbox_41"],radio_27:["checkbox_42","checkbox_43","checkbox_44","checkbox_45","checkbox_46","checkbox_47","checkbox_48"],radio_28:["checkbox_49","checkbox_50","checkbox_51","checkbox_52","checkbox_53","checkbox_54","checkbox_55"],radio_29:["checkbox_56","checkbox_57","checkbox_58","checkbox_59","checkbox_60","checkbox_61","checkbox_62"],radio_13:["checkbox_14","checkbox_15","checkbox_16","checkbox_17","checkbox_18","checkbox_19","checkbox_20","checkbox_21","checkbox_22","checkbox_23","checkbox_24","checkbox_25","checkbox_26","checkbox_27","checkbox_28","checkbox_29","checkbox_30","checkbox_31","checkbox_32","checkbox_33","checkbox_34","checkbox_35","checkbox_36","checkbox_37","checkbox_38","checkbox_39","checkbox_40","checkbox_41","checkbox_42","checkbox_43","checkbox_44","checkbox_45","checkbox_46","checkbox_47","checkbox_48","checkbox_49","checkbox_50","checkbox_51","checkbox_52","checkbox_53","checkbox_54","checkbox_55","checkbox_56","checkbox_57","checkbox_58","checkbox_59","checkbox_60","checkbox_61","checkbox_62"],radio_15:["checkbox_14","checkbox_15","checkbox_16","checkbox_17","checkbox_18","checkbox_21","checkbox_22","checkbox_23","checkbox_24","checkbox_25","checkbox_28","checkbox_29","checkbox_30","checkbox_31","checkbox_32","checkbox_35","checkbox_36","checkbox_37","checkbox_38","checkbox_39"],radio_17:["checkbox_35","checkbox_36","checkbox_37","checkbox_38","checkbox_39","checkbox_40","checkbox_41"],radio_18:["checkbox_42","checkbox_43","checkbox_44","checkbox_45","checkbox_46","checkbox_47","checkbox_48"],radio_19:["checkbox_49","checkbox_50","checkbox_51","checkbox_52","checkbox_53","checkbox_54","checkbox_55"],radio_20:["checkbox_56","checkbox_57","checkbox_58","checkbox_59","checkbox_60","checkbox_61","checkbox_62"]},m=a(".timesel",h);b()})}}(jQuery),function(a){a.fn.moreReviews=function(b){this.each(function(){var b=a(this);b.on("click",function(b){function c(a){for(var b=0;b<a.length;b++)f+='<div class="b-reviews"><a href="'+a[b].href+'"><img src="'+a[b].img+'" alt="">'+a[b].name+'</a><div class="date">'+a[b].date+'</div><div class="b-rating"><span class="stars" style="width:'+a[b].rating+';"></span></div><div class="tit">'+a[b].title+"</div><p>"+a[b].text+"</p></div>";e.parent().before(f)}var d,e=a(this);a.getJSON(e.attr("href"),function(a){d=a,c(d)});var f="";return!1})})}}(jQuery),$(document).ajaxError(function(a,b,c,d){switch(b.status){case 400:window.location.reload();break;case 401:var e=confirm("Your session has been expired. Would you like to be redirected to the login page?");e&&(window.location="/auth/login");break;case 403:}});